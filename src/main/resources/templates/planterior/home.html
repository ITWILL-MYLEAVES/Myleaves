<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base_layout}">
<th:block layout:fragment="mycsses">
	<link th:href="@{/css/planterior.css}" rel="stylesheet" />
</th:block>
<main layout:fragment="main">

	<div class="container plants__page" id="palnts__page">
		<section class="plants_title_section">
			<p class="plants_title">
				어떤 종류의 식물을 <br> 찾고 있나요?
			</p>
		</section>

		<!-- 카테고리 -->
		<form class="filterForm" action="" >
			<section class="plants_filter_section" id="first_filter">
				<div class="plants_filter_section" id="first_filter">
						<!-- state_content -->
						<ul class="filterLists list-unstyled">
							<li>
								<!-- 해당 css에 id="filterBtn" 이걸로 정해진 코드 존재함 -->
								<input type="image" th:src="@{/images/common/reset.svg}" name="reset" id="filter_reset_btn" />
								<input type="button" class="filterBtn"  name="stateContent" value="거실"  />
								<input type="button" class="filterBtn"  name="stateContent" value="주방"  />
								<input type="button" class="filterBtn"  name="stateContent" value="욕실"  />
								<input type="button" class="filterBtn"  name="stateContent" value="방"  />
								<input type="button" class="filterBtn"  name="stateContent" value="베란다"  />
							</li>
						</ul>
				</div>
				<!-- condition_content -->
				<ul class="list-unstyled secondFilterSection" id="secondFilter" name="secondfilter"></ul>
				<div class="filterDivision"></div>
				
	
			</section>
		</form>
		
		<!-- 식물 데이터 수 div -->
		<div class="plantDataCount">
			<span>식물 데이터</span> <span id="plantData"></span>종
		</div>
		<div>
			<span class="pick">이 달의 MD 픽</span>
		</div>

		<!-- 캐러셀 -->
		<div class="row m-2">
			<div class="col-xl-3 col-lg-3 col-md-6">
				<div class="card">
					<img th:src="@{/images/planterior/eucalyptus.png}" />
					<div class="card-body">
						<p class="card-text">Some quick example text to build on the
							card title and make up the bulk of the card's content.</p>
					</div>
				</div>
			</div>

		</div>

		<div class="p-4"></div>

		<!-- 사용자 All card -->
		<div class="m-2">
			<span class="m-2">All</span>
			<!-- 로그인 하지 않은 사용자이면 -->
			<th:block sec:authorize="isAnonymous()">
				<a class="float-end btn btn-success notCreate" type="button">
					글쓰기 </a>
			</th:block>
			<th:block sec:authorize="isAuthenticated()">
				<a class="float-end btn btn-success" th:href="@{/planterior/create}"
					type="button"> 글쓰기 </a>
			</th:block>
		</div>
		<br>
		<div class="m-2">
			<!-- 로그인 안 했을 경우 -->
			<th:block sec:authorize="isAnonymous()">
				<div class="row row-cols-1 row-cols-md-4 g-4">
					<div class="col" th:each="list: ${cardList}">
						<div class="card">
							<img th:src="@{/images/planterior/eucalyptus.png}" />
							<div class="card-body">
								<p class="planteriorButtonEle"
									th:text="${list.plantName} + '(' + ${list.plantNameEnglish} +')'" />
								<div>
									<button class="none">
										<img th:src="@{/images/planterior/bookmark.svg}" />
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</th:block>
			<!-- 로그인 했을 경우 -->
			<th:block sec:authorize="isAuthenticated()">
				<div class="row row-cols-1 row-cols-md-4 g-4">
					<div class="col" th:each="list: ${cardList}">
						<div>
							<input type="hidden" id="userId" name="userId"
								th:value="${#authentication.name}" /> <input type="hidden"
								id="plantName" th:value="${list.plantName}" /> <input
								type="hidden" id="planteriorId" th:value="${list.planteriorId}" />
						</div>
						<th:block th:if="${list.userId == #authentication.name}">
							<div class="card">
								<img th:src="@{/images/planterior/eucalyptus.png}" />
								<div class="card-body">
									<p class="planteriorButtonEle"
										th:text="${list.plantName} + '(' + ${list.plantNameEnglish} +')'" />
									<div>
									<button class="notBookmark">
										<img th:src="@{/images/planterior/bookmark.svg}" />
									</button>
								</div>
								</div>
							</div>
						</th:block>
						<th:block th:unless="${list.userId == #authentication.name}">
								<th:block th:if="${bookmark[list.planteriorId] == null}">
									<div class="card">
										<img th:src="@{/images/planterior/eucalyptus.png}" />
										<div class="card-body">
											<p class="planteriorButtonEle"
												th:text="${list.plantName} + '(' + ${list.plantNameEnglish} +')'" />
											<div>
												<button class="imgButton" th:value="${list.planteriorId}">
													<img th:src="@{/images/planterior/bookmark.svg}" />
												</button>
											</div>
										</div>
									</div>
								</th:block>
								<th:block th:unless="${bookmark[list.planteriorId] == null}"> 
									<div class="card">
										<img th:src="@{/images/planterior/eucalyptus.png}" />
										<div class="card-body">
											<p class="planteriorButtonEle"
												th:text="${list.plantName} + '(' + ${list.plantNameEnglish} +')'" />
											<div>
												<button class="imgButtonFill" th:value="${list.planteriorId}">
													<img th:src="@{/images/planterior/bookmarkFill.svg}" />
												</button>
											</div>
										</div>
									</div>
								</th:block>
						</th:block>
					</div> <!-- cardlist -->
					</div>
				</div>
			</th:block>
	</div>
	<!-- 더보기 버튼 -->
	<div class="d-flex justify-content-center">
		<input type="hidden" class="userId" th:value="${#authentication.name}" />
		<button id="loadMoreButton" class="m-4 btn btn-success rounded ">더보기</button>
	</div>
	<th:block sec:authorize="isAuthenticated()">
		<th:block th:if="${#authentication.name.equals('admin')}">
			<div class="d-flex justify-content-end">
				<a th:href="@{/mngr/planterior}"><button class="m-4 btn btn-success rounded ">관리자 플랜테리어 페이지로 돌아가기</button></a>
			</div>
		</th:block>
	</th:block>

	<!-- end -->
</main>
<th:block layout:fragment="myscripts">
	<script src="/js/planterior/planteriorHome.js"></script>
</th:block>
</html>