<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base_layout}">
<th:block layout:fragment="mycsses">
	<link th:href="@{/css/community.css}" rel="stylesheet" />
</th:block>
<main layout:fragment="main">
	<div class="text-center mb-5">
		<h3>커뮤니티</h3>
	</div>
    <a th:href="@{/community/create}" class="btn btn-outline-dark float-end my-2">글쓰기</a>
	<table class="table table-hover">
		<thead>
			<tr>
				<th scope="col">[ 말머리 ]</th>
				<th scope="col">제목</th>
				<th scope="col">작성자</th>
				<th scope="col">작성일</th>
			</tr>
		</thead>
	<tbody>
	    <tr th:each="post : ${posts}">
	        <td th:text="'[' + ${post.hrsHd} + ']'"></td>
	        <td><a class="link-dark link-underline-opacity-0" th:href="@{/community/detail?id={id} (id = ${post.communityId})}" th:text="${post.title}"></a>
	            <span th:text="'[' +${commentCountMap.get(post.communityId)}+ ']'"class="red-text"></span></td>
	        <td th:text="${post.userId}"></td>
	        <td th:text="${#temporals.format(post.createdDate, 'yyyy-MM-dd HH:mm')}"></td>
	    </tr>
	</tbody>
	</table>
	<form th:action="@{/community/search}">
		<div class="input-group mt-5 mb-5">
			<select class="form-select dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" name="type">
				<option class="dropdown-item" value="t">제목</option>
				<option class="dropdown-item" value="c">내용</option>
				<option class="dropdown-item" value="tc">제목+내용</option>
				<option class="dropdown-item" value="u">작성자</option>
			</select>
			<input class="form-control" name="keyword" type="text" placeholder="검색어 입력" aria-describedby="search" required/>
			<button class="btn btn-outline-dark" id="search">검색</button>
		</div>
	</form>
	<!-- 페이징처리 시작 -->
	<nav aria-label="...">
		<ul class="pagination pagination-sm justify-content-center">
			<li th:each="page : ${#numbers.sequence(startPage, endPage)}" class="page-item">
				<a style="color: white; background-color: black; border-color: black;" th:if="${page == nowPage}" class="page-link active" th:text="${page}"></a> 
				<a style="color: black;" th:if="${page != nowPage}" th:href="@{/community(page=${page - 1})}" class="page-link" th:text="${page}"></a></li>
		</ul>
	</nav>
	<!-- 페이징처리 끝 -->
</main>
</html>